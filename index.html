<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Climate Analysis Tool</title>
<style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        background: radial-gradient(ellipse at bottom, #0b132b 0%, #000000 100%);
        min-height: 100vh;
        overflow: hidden;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
    }

    /* Button Styling */
    .btn-container {
        position: absolute;
        bottom: 80px;
        text-align: center;
        opacity: 0;
        transform: translateY(40px);
        animation: fadeInBtn 1s ease-out 4.5s forwards;
        z-index: 10;
    }
    @keyframes fadeInBtn {
        to { opacity: 1; transform: translateY(0); }
    }
    .btn {
        background: linear-gradient(135deg, #007cf0 0%, #00dfd8 100%);
        color: white;
        border: none;
        padding: 16px 60px;
        font-size: 1.2em;
        border-radius: 40px;
        cursor: pointer;
        box-shadow: 0 10px 40px rgba(0, 223, 216, 0.5);
        font-weight: 600;
        transition: all 0.4s ease;
        position: relative;
        overflow: hidden;
        text-decoration: none;
    }
    .btn:hover { transform: translateY(-5px); }
</style>
</head>
<body>
    <canvas id="earthCanvas"></canvas>
    <div class="btn-container">
        <a href="https://YOUR_CLOUDFLARE_URL_HERE/guacamole" class="btn" target="_blank">Launch Tool</a>
    </div>

<script type="module">
import * as THREE from "https://cdn.jsdelivr.net/npm/three@0.164/build/three.module.js";
import { OrbitControls } from "https://cdn.jsdelivr.net/npm/three@0.164/examples/jsm/controls/OrbitControls.js";

const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
camera.position.z = 2.5;

const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById("earthCanvas"), antialias: true });
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setPixelRatio(window.devicePixelRatio);

/* Earth Texture (NASA Blue Marble) */
const textureLoader = new THREE.TextureLoader();
const earthTexture = textureLoader.load("https://eoimages.gsfc.nasa.gov/images/imagerecords/74000/74415/world.topo.bathy.200412.3x21600x10800.jpg");
const earthBump = textureLoader.load("https://raw.githubusercontent.com/fireship-io/threejs-earth/main/earthbump1k.jpg");
const earthSpec = textureLoader.load("https://raw.githubusercontent.com/fireship-io/threejs-earth/main/earthspec1k.jpg");

const earthGeometry = new THREE.SphereGeometry(1, 64, 64);
const earthMaterial = new THREE.MeshPhongMaterial({
    map: earthTexture,
    bumpMap: earthBump,
    bumpScale: 0.04,
    specularMap: earthSpec,
    specular: new THREE.Color("grey")
});
const earthMesh = new THREE.Mesh(earthGeometry, earthMaterial);
scene.add(earthMesh);

/* Glow (Atmosphere) */
const atmosphereGeometry = new THREE.SphereGeometry(1.05, 64, 64);
const atmosphereMaterial = new THREE.MeshBasicMaterial({
    color: 0x3399ff,
    transparent: true,
    opacity: 0.2,
});
const atmosphere = new THREE.Mesh(atmosphereGeometry, atmosphereMaterial);
scene.add(atmosphere);

/* Lighting */
const ambientLight = new THREE.AmbientLight(0x333333);
const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
directionalLight.position.set(5, 3, 5);
scene.add(ambientLight);
scene.add(directionalLight);

/* Stars Background */
const starsGeometry = new THREE.BufferGeometry();
const starVertices = [];
for (let i = 0; i < 5000; i++) {
    const x = (Math.random() - 0.5) * 2000;
    const y = (Math.random() - 0.5) * 2000;
    const z = -Math.random() * 2000;
    starVertices.push(x, y, z);
}
starsGeometry.setAttribute("position", new THREE.Float32BufferAttribute(starVertices, 3));
const starsMaterial = new THREE.PointsMaterial({ color: 0xffffff });
const stars = new THREE.Points(starsGeometry, starsMaterial);
scene.add(stars);

/* Controls */
const controls = new OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;
controls.enableZoom = false;
controls.autoRotate = true;
controls.autoRotateSpeed = 0.4;

window.addEventListener("resize", () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
});

/* Animate */
function animate() {
    requestAnimationFrame(animate);
    controls.update();
    renderer.render(scene, camera);
}
animate();
</script>
</body>
</html>
